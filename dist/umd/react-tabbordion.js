!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("prop-types"),require("react")):"function"==typeof define&&define.amd?define(["prop-types","react"],t):"object"==typeof exports?exports.ReactTabbordion=t(require("prop-types"),require("react")):e.ReactTabbordion=t(e.PropTypes,e.React)}(this,function(e,t){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/build/",t(t.s=8)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";function o(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"--",r=e&&e[t]||null;if(null==r)return null;"string"!=typeof r&&(r=String(r));var a="",i=r.indexOf(" ");i>=0&&(a=r.slice(i),r=r.slice(0,i));var l=" "+r+o;if(a&&o){var c=" "+o;for(i=a.indexOf(c);i>=0;i=a.indexOf(c,i+r.length))a=a.replace(c,l)}return Array.isArray(n)?n.reduce(function(e,t){return null!=t?e+l+t:e},r)+a:r+a}Object.defineProperty(t,"__esModule",{value:!0}),t.bemClassName=o},function(e,t,n){"use strict";function o(e){return Array.isArray(e)&&e.length>0?e:s}function r(e){return e.checked}function a(e){return e.disabled}function i(e){return e.index}function l(e,t){if(e===t)return!1;var n=Object.keys(e||{}).sort(),o=Object.keys(t||{}).sort();return n.length!==o.length||n.some(function(n,r){return n!==o[r]||e[n]!==t[n]})}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some(function(e,n){return l(e,t[n])})}Object.defineProperty(t,"__esModule",{value:!0}),t.getArray=o,t.getChecked=r,t.getDisabled=a,t.getIndex=i,t.isShallowlyDifferentArray=c;var s=[]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function a(e,t){var n=t.bem,o=t.tabbordionPanel,a=e.className,l=e.component,s=r(e,["className","component"]),u=n.getState(),f=u.bemSeparator,p=u.blockElements,b=o.getState(),h=b.contentId,m=b.inputId,y=b.modifiers,v=(0,d.bemClassName)(p,"content",y,f);return c.default.createElement(l,i({id:h},s,{"aria-labelledby":m,className:v?a?v+" "+a:v:a,role:"tabpanel"}))}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=n(1),c=o(l),s=n(0),u=o(s),d=n(2);a.contextTypes={bem:u.default.object.isRequired,tabbordionPanel:u.default.object.isRequired},a.defaultProps={component:"div"},a.propTypes={className:u.default.string,component:u.default.oneOfType([u.default.func,u.default.object,u.default.string])},t.default=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=n(1),f=o(d),p=n(0),b=o(p),h=n(2),m=function(e){function t(e,n){a(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.onClick=o.onClick.bind(o),o}return l(t,e),u(t,[{key:"onClick",value:function(e){if(!e.defaultPrevented){var t=this.context.tabbordionPanel.getState(),n=t.onClickLabel;n&&n()}}},{key:"render",value:function(){var e=this.context.bem.getState(),t=e.bemSeparator,n=e.blockElements,o=this.context.tabbordionPanel.getState(),a=o.inputId,i=o.modifiers,l=this.props,c=l.className,u=l.component,d=r(l,["className","component"]),p=(0,h.bemClassName)(n,"label",i,t);return f.default.createElement(u,s({className:p?c?p+" "+c:p:c,htmlFor:a,onClick:this.onClick},d))}}]),t}(d.Component);m.contextTypes={bem:b.default.object.isRequired,tabbordionPanel:b.default.object.isRequired},m.defaultProps={component:"label"},m.propTypes={className:b.default.string,component:b.default.oneOfType([b.default.func,b.default.object,b.default.string])},t.default=m},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function c(e,t,n){var o=t.bem,r=t.tabbordion,a=e.checked,i=e.disabled,c=e.id,s=e.index,u=e.modifiers,p=e.name,b=e.type,h=e.value,m=e.visible,v=l(e,["checked","disabled","id","index","modifiers","name","type","value","visible"]),g=r.getState(),P=g.checkedPanels,k=g.disabledPanels,x=g.firstVisiblePanel,O=g.lastVisiblePanel,C=g.onChangePanel,_=g.panelName,j=g.panelType,S=g.tabbordionId,w=(0,y.getArray)(P),T=(0,y.getArray)(k),E=(null!=p?p:_)||S||"tabbordion-panel-"+n,I=c||(S||E)+"-"+s,N=null!=a?a:w.includes(s),M=null!=i?i:T.includes(s),A=!1===m?"hidden":x===s&&"first"||O===s&&"last"||"between",q=null;f.Children.forEach(v.children,function(e){!q&&e&&e.type.contextTypes&&e.type.contextTypes.panel&&(q=(e.props||e._store&&e._store.props||{}).id||null)}),q||(q=I+"-content");var R=o.getState(),V=R.bemModifiers,L=R.bemSeparator,D=R.blockElements;return d({},v,{bemModifiers:V,bemSeparator:L,blockElements:D,checked:N,disabled:M,contentId:q,id:I,index:s,name:E,type:null!=b?b:j,value:null!=h?h:String(s),visible:A,checkedPanels:w,disabledPanels:T,modifiers:V?(0,y.getArray)(u).concat([V[N?"checked":"unchecked"],V[q?"content":"noContent"],V[M?"disabled":"enabled"],V[A]]):(0,y.getArray)(u),onChangePanel:C})}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=n(1),p=o(f),b=n(0),h=o(b),m=n(2),y=n(3),v="undefined"!=typeof window&&"requestAnimationFrame"in window?window.requestAnimationFrame:setTimeout,g=0,P=0,k=function(e){function t(e,n){r(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return g++,o.uniqId=""+P,P++,o.cachedProps=c(e,n,o.uniqId),o.getInputRef=o.getInputRef.bind(o),o.onChange=o.onChange.bind(o),o.onClickLabel=o.onClickLabel.bind(o),o.tabbordionPanel={getState:function(){return{onClickLabel:o.onClickLabel,checked:o.cachedProps.checked,contentId:o.cachedProps.contentId,disabled:o.cachedProps.disabled,inputId:o.cachedProps.id,index:o.cachedProps.index,modifiers:o.cachedProps.modifiers,visible:o.cachedProps.visible}}},o}return i(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e,t){this.cachedProps=c(e,t,this.uniqId)}},{key:"componentWillUnmount",value:function(){delete this.cachedProps,0===--g&&(P=0)}},{key:"getChildContext",value:function(){return{tabbordionPanel:this.tabbordionPanel}}},{key:"getInputRef",value:function(e){this.input=e}},{key:"onChange",value:function(e){if(!e.defaultPrevented){var t=this.cachedProps,n=t.index,o=t.onChange;o&&o(n)}}},{key:"onClickLabel",value:function(){var e=this,t=this.cachedProps,n=t.index,o=t.onChangePanel;o&&o(n),v(function(){e.input&&e.input.checked&&document.activeElement!==e.input&&e.input.focus()})}},{key:"render",value:function(){var e=this.cachedProps,t=(e.bemModifiers,e.bemSeparator),n=e.blockElements,o=e.checked,r=(e.checkedPanels,e.children),a=e.className,i=e.component,c=e.contentId,s=e.disabled,u=(e.disabledPanels,e.id),f=(e.index,e.modifiers),b=(e.onChangePanel,e.name),h=e.style,y=e.type,v=e.value,g=e.visible,P=l(e,["bemModifiers","bemSeparator","blockElements","checked","checkedPanels","children","className","component","contentId","disabled","disabledPanels","id","index","modifiers","onChangePanel","name","style","type","value","visible"]),k=(0,m.bemClassName)(n,"panel",f,t),x=o?"true":"false";return p.default.createElement(i,d({},P,{"aria-expanded":c&&x,"aria-selected":x,className:k?a?k+" "+a:k:a,role:"tab",style:d({},h,{display:"hidden"===g?"none":null})}),p.default.createElement("input",{"aria-controls":c,checked:o,"data-state":"tabbordion",disabled:s,id:u,name:b,onChange:this.onChange,ref:this.getInputRef,type:y,value:v}),r)}}]),t}(f.PureComponent);k.childContextTypes={tabbordionPanel:h.default.object},k.contextTypes={bem:h.default.object.isRequired,tabbordion:h.default.object.isRequired},k.defaultProps={component:"li"},k.propTypes={checked:h.default.bool,className:h.default.string,disabled:h.default.bool,id:h.default.string,index:h.default.number,name:h.default.string,onChange:h.default.func,type:h.default.oneOf(["checkbox","radio"]),value:h.default.string,visible:h.default.bool,children:h.default.node,component:h.default.oneOfType([h.default.func,h.default.object,h.default.string]),modifiers:h.default.array},t.default=k},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=n(1),f=o(d),p=n(0),b=o(p),h=n(3),m=0,y=0,v=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return m++,n.uniqId="tabbordion-"+y,y++,n.getNextState=n.getNextState.bind(n),n.onChange=n.onChange.bind(n),n.firstVisibleIndex=null,n.lastVisibleIndex=null,n.state=n.getNextState(e,{stateful:!1},Array.isArray(e.panels)?e.panels:e.initialPanels),n.bem={getState:function(){return{bemModifiers:n.props.bemModifiers,bemSeparator:n.props.bemSeparator,blockElements:n.props.blockElements}}},n.tabbordion={getState:function(){var e=(0,h.getArray)(n.state.stateful?n.state.panels:n.props.panels);return{checkedPanels:e.filter(h.getChecked).map(h.getIndex),disabledPanels:e.filter(h.getDisabled).map(h.getIndex),firstVisiblePanel:n.firstVisibleIndex,lastVisiblePanel:n.lastVisibleIndex,onChangePanel:n.onChange,panelName:n.props.name||n.uniqId,panelType:"multiple"===n.props.mode?"checkbox":"radio",tabbordionId:n.props.id||n.uniqId}}},n}return l(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.getNextState(e,this.state);t!==this.state&&this.setState(t)}},{key:"componentWillUnmount",value:function(){0===--m&&(y=0)}},{key:"getChildContext",value:function(){return{bem:this.bem,tabbordion:this.tabbordion}}},{key:"getNextState",value:function(e,t,n){var o=(0,h.getArray)(t.stateful?t.panels:n||e.panels),r=[],a=[],i=[],l="multiple"===e.mode;d.Children.forEach(e.children,function(e){if(e&&e.type.contextTypes&&e.type.contextTypes.tabbordion){var t=e.props||e._store&&e._store.props||{},n=null!=t.index&&t.index,o=!1===n||a.includes(n);o?i.push(r.length):a.push(n),r.push({checked:t.checked,disabled:t.disabled,index:!o&&n,visible:t.visible})}});for(var c=0;i.length>0;){for(;a.includes(c);)c++;r[i.shift()].index=c,c++}var s=0,u=null,f=null,p=r.map(function(e,t){var n=o.find(function(t){return t.index===e.index})||{checked:r,disabled:a,visible:i},r=(null!=e.checked?e.checked:!!n.checked)&&(l||0===s),a=null!=e.disabled?e.disabled:!!n.disabled,i=null!=e.visible?e.visible:!1!==n.visible;return i&&(f=t,null==u&&(u=f)),r&&i&&s++,{checked:r,disabled:a,index:e.index,visible:i}});null!=u&&(0===s&&"multiple"!==e.mode&&"toggle"!==e.mode&&(p[u].checked=!0),u=p[u].index,f=p[f].index),this.firstVisibleIndex=u,this.lastVisibleIndex=f;var b=!e.onChange||!e.onPanels||!Array.isArray(e.panels);if(b){if(!t.stateful||(0,h.isShallowlyDifferentArray)(t.panels,p))return{panels:p,stateful:b}}else if((0,h.isShallowlyDifferentArray)(o,p)&&e.onPanels(p),t.stateful)return{panels:null,stateful:b};return t}},{key:"onChange",value:function(e){var t=this.props.mode;if(!this.state.stateful)return void this.props.onChange({index:e,mode:t});var n=this.state.panels.find(function(t){return t.index===e});if(null==n)throw new Error("Unexpected invalid panel index: "+e);var o=!1;switch(t){case"toggle":this.state.panels.forEach(function(e){e!==n&&e.checked&&(e.checked=!1)}),n.checked=!n.checked,o=!0;break;case"multiple":n.checked=!n.checked,o=!0;break;default:this.state.panels.forEach(function(e){e!==n&&e.checked&&(e.checked=!1,o=!0)}),n.checked||(n.checked=!0,o=!0)}o&&this.setState({panels:this.state.panels.slice(0)})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.component,o=(e.bemModifiers,e.bemSeparator,e.blockElements,e.component,e.initialPanels,e.mode,e.name,e.onChange,e.onPanels,e.panels),a=r(e,["children","component","bemModifiers","bemSeparator","blockElements","component","initialPanels","mode","name","onChange","onPanels","panels"]),i=0,l=this.state.stateful?this.state.panels:o;return f.default.createElement(n,s({},a,{role:"tablist"}),d.Children.map(t,function(e){if(e&&e.type.contextTypes&&e.type.contextTypes.tabbordion){var t=f.default.cloneElement(e,l[i]);return i++,t}return e}))}}]),t}(d.PureComponent);v.childContextTypes={bem:b.default.object,tabbordion:b.default.object},v.defaultProps={bemModifiers:{between:"between",checked:"checked",content:"content",disabled:"disabled",enabled:"enabled",first:"first",last:"last",noContent:"no-content",unchecked:"unchecked"},bemSeparator:"--",blockElements:{content:"panel__content",label:"panel__label",panel:"panel"},component:"ul",mode:"single"};var g=b.default.arrayOf(b.default.shape({checked:b.default.bool,disabled:b.default.bool,index:b.default.number,visible:b.default.bool}));v.propTypes={bemModifiers:b.default.shape({between:b.default.string,checked:b.default.string,content:b.default.string,disabled:b.default.string,enabled:b.default.string,first:b.default.string,hidden:b.default.string,last:b.default.string,noContent:b.default.string,unchecked:b.default.string}),bemSeparator:b.default.string,blockElements:b.default.shape({content:b.default.string,label:b.default.string,panel:b.default.string}),children:b.default.node,className:b.default.string,component:b.default.oneOfType([b.default.func,b.default.object,b.default.string]),id:b.default.string,initialPanels:g,mode:b.default.oneOf(["single","toggle","multiple"]),name:b.default.string,onChange:b.default.func,onPanels:b.default.func,panels:g},t.default=v},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TabContent=t.TabLabel=t.TabPanel=t.Tabbordion=void 0;var r=n(7),a=o(r),i=n(6),l=o(i),c=n(5),s=o(c),u=n(4),d=o(u);t.Tabbordion=a.default,t.TabPanel=l.default,t.TabLabel=s.default,t.TabContent=d.default}])});